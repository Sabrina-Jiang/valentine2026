:root {
    --bg: #0a0a0a;
    --gold: #d4af37;
    --red: #7f1d1d;
    --text: #d1d1d1;
}

body, html {
    margin: 0; padding: 0; width: 100%; height: 100%;
    background-color: var(--bg); color: var(--text);
    font-family: 'Special Elite', monospace; overflow: hidden;
    -webkit-touch-callout: none; -webkit-user-select: none; user-select: none;
}

.grain-overlay {
    position: fixed; inset: 0; z-index: 1000; pointer-events: none; opacity: 0.04;
    background: url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_Noise_Texture.png');
}

/* 布局修复：全屏容器 */
section {
    position: fixed; inset: 0; display: none;
    flex-direction: column; align-items: center; justify-content: center;
    padding: 20px; box-sizing: border-box; background: var(--bg);
}

.stage-visible { display: flex !important; animation: fadeIn 0.8s ease; }
.stage-hidden { display: none !important; }

/* 蜡封开场样式 (保持您的设计) */
.envelope {
    width: 280px; height: 420px; background: #1a1a1a; border: 1px solid #222;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    position: relative; box-shadow: 0 40px 80px rgba(0,0,0,0.9);
}

.wax-seal {
    width: 65px; height: 65px; background: radial-gradient(#9b1c1c, #7f1d1d);
    border-radius: 50%; position: absolute; bottom: 20%;
    box-shadow: 0 4px 10px #000, inset 0 0 10px rgba(0,0,0,0.5);
}
.wax-seal::after { content: 'V'; color: rgba(0,0,0,0.3); font-size: 30px; line-height: 65px; width: 100%; text-align: center; display: block; }

.envelope-label { border-top: 1px solid #333; border-bottom: 1px solid #333; padding: 20px; text-align: center; }
.top-secret { color: var(--red); letter-spacing: 0.4em; font-size: 12px; display: block; }
.case-no { color: #555; font-size: 10px; }
.click-hint { margin-top: 30px; font-size: 10px; opacity: 0.4; animation: blink 2s infinite; }

/* 指纹进度 */
#fingerprint-btn {
    width: 80px; height: 80px; border: 1px solid #222; border-radius: 15px;
    margin: 40px auto; position: relative; display: flex; align-items: center; justify-content: center;
}
.finger-icon { width: 40px; color: #333; }
#progress-ring { fill: transparent; stroke: var(--gold); stroke-width: 2; stroke-dasharray: 238.76; stroke-dashoffset: 238.76; transition: stroke-dashoffset 0.1s linear; }
.progress-svg { position: absolute; inset: 0; transform: rotate(-90deg); }

/* Phase 1 物理结构修复 */
#mechanism-container { position: relative; width: 240px; height: 240px; margin: 20px 0; }
#time-ring { position: absolute; inset: 0; border: 2px solid #1a1a1a; border-radius: 50%; }
#hour-hand-p1 { width: 2px; height: 100px; background: var(--gold); position: absolute; bottom: 50%; left: calc(50% - 1px); transform-origin: bottom; }
#marker-9 { position: absolute; left: 0; top: 50%; width: 10px; height: 2px; background: #333; }
.marker-active { background: var(--gold) !important; box-shadow: 0 0 10px var(--gold); }

/* 小球样式修复：确保可见 */
#balance-zone { 
    position: absolute; inset: 70px; 
    border: 1px dashed rgba(255,255,255,0.05); border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
}
#balance-ball { 
    width: 18px; height: 18px; background: var(--gold); 
    border-radius: 50%; box-shadow: 0 0 15px var(--gold); 
    transition: transform 0.1s ease-out;
}

.controls-container { width: 100%; max-width: 280px; margin-top: 30px; text-align: center; }
.progress-bar-bg { width: 100%; height: 4px; background: #111; border-radius: 2px; margin: 15px 0; overflow: hidden; }
#balance-fill { height: 100%; background: var(--gold); width: 0%; transition: width 0.1s; }
.instr { font-size: 9px; color: #555; letter-spacing: 0.2em; text-transform: uppercase; }

/* 其它样式 */
.photo-frame { width: 280px; height: 200px; background: #111; position: relative; border: 1px solid #222; margin-bottom: 30px; }
.photo-frame img { width: 100%; height: 100%; object-fit: cover; opacity: 0.1; filter: grayscale(1); transition: 1.5s; }
.cup-row { display: flex; gap: 20px; margin: 20px 0; }
.cup { font-size: 30px; opacity: 0.2; filter: grayscale(1); transition: 0.5s; cursor: pointer; }
#bpl-input { background: transparent; border: none; border-bottom: 1px solid #333; color: var(--gold); text-align: center; padding: 10px; font-family: inherit; outline: none; margin-bottom: 20px; }
#ica-spot { position: absolute; top: 25%; right: 5%; width: 50px; height: 50px; cursor: pointer; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes blink { 50% { opacity: 0.1; } }
.hidden { display: none !important; }
.opacity-0 { opacity: 0; pointer-events: none; }